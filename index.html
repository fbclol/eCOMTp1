<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html" xml:lang="fr" lang="fr">

<head>
    <title>Musée - boutique shop</title>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="x-ua-compatible">
    <meta content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">

    <link rel="stylesheet" type="text/css" href="template/css/style.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" type="text/css" href="template/css/responsive.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style_custom.css" >
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">

    <script type="text/javascript" src="template/js/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="template/js/materialize.min.js"></script>
    <script type="text/javascript" src="template/js/slick.min.js"></script>
    <script type="text/javascript" src="template/js/jquery.slicknav.js"></script>

    <script type="text/javascript" src="personnages.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <script src="http://underscorejs.org/underscore-min.js"></script>
</head>

<body cz-shortcut-listen="true" data-spy="scroll" data-target=".status-corrent" data-offset="50">

<div id="main">

    <!-- LEFT SIDEBAR -->
    <div id="slide-out-left" class="side-nav" style="left: -250px;">
        <div class="top-left-nav">
            <!-- Account -->
            <div class="pic-thumb">
                <img src="images/profile-image-1.png" alt="">
            </div>
            <a href="#" class="dropdown-button" data-activates="dropdown2">
                Nom Prénom
            </a>
        </div>


        <!-- App/Site Menu -->
        <div id="main-menu">
            <ul>
                <li><a href="index.html"><i class="fa fa-home"></i> Home</a></li>
                <li class="has-sub"><a href="#"><i class="fa fa-th-list"></i> Categories<span class="fa fa-angle-right"></span></a>
                    <ul id="categories">
                        <!--<li class="has-sub"><a href="#">Sub<span class="fa fa-angle-right"></span></a>-->
                            <!--<ul>-->
                                <!--<li><a class="perso1" href="">perso 1</a></li>-->
                                <!--<li><a class="perso2" href="">perso 2</a></li>-->
                                <!--<li><a class="perso3" href="">perso 3</a></li>-->
                            <!--</ul>-->
                        <!--</li>-->
                    </ul>
                </li>
                <li><a id="checkoutCommande" ><i class="fa fa-shopping-basket"></i> Checkout</a></li>

                <li><a href=""><i class="fa fa-envelope"></i> Contact</a></li>
            </ul>
        </div>
        <!-- End Site/App Menu -->
    </div>
    <!-- END LEFT SIDEBAR -->

    <!-- RIGHT SIDEBAR -->
    <div id="slide-out-right" class="side-nav right-aligned" style="width: 300px; right: -310px;">

        <!-- Search form -->
        <form class="search">
            <div class="input-field">
                <input id="search" type="search" placeholder="Search" autocomplete="off">
                <label for="search" class="active"><i class="fa fa-search"></i></label>
            </div>
        </form>
        <!-- End Search form -->

        <!-- TABS -->
        <div class="sidebar-tabs">

            <!-- Tabs Menu -->
            <ul class="tabs" style="width: 100%;">
                <li class="tab"><a class="active" href="#yourcart">Your Cart</a></li>
                <li class="tab"><a href="#latestblog">Latest blog</a></li>
                <div class="indicator" style="right: 111.6px; left: 0px;"></div></ul>
            <!-- End Tabs Menu -->
        </div>

        <!-- Right Sidebar Tabs Content -->
        <div class="sidebar-tabs_content">

            <!-- Your Cart Tabs -->
            <div id="yourcart">

                <ol class="cart-item">
                    <li>
                        <div class="thumb">
                            <img src="images/shop8_80x80.png" alt="">
                        </div>
                        <div class="cart-delete">
                            <a href="#">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                        <div class="cart-detail">
                            <h3 class="product-name"><a href="product.html">Tablet Mini 2</a></h3>
                            <div class="price">
                                <span>Price</span> $ 472.5
                            </div>
                            <div class="qty">
                                <span>Qty</span> <input type="number" value="1">
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="thumb">
                            <img src="images/shop3_65x65.png" alt="">
                        </div>
                        <div class="cart-delete">
                            <a href="#">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                        <div class="cart-detail">
                            <h3 class="product-name"><a href="product.html">Modern Watch</a></h3>
                            <div class="price">
                                <span>Price</span> $ 260.9
                            </div>
                            <div class="qty">
                                <span>Qty</span> <input type="number" value="1">
                            </div>
                        </div>
                    </li>

                </ol>

                <div class="cart-action">
                    <div class="subtotal">
                        <span class="title">Subtotal</span>
                        <span class="price">$ 835.2</span>
                    </div>
                    <div class="subtotal">
                        <span class="title">Tax</span>
                        <span class="price">$ 4.0</span>
                    </div>
                    <div class="total">
                        <span class="title">Total</span>
                        <span class="price">$ 839.2</span>
                    </div>
                    <a id="btnClickCommande" href="#" class="btn green btn-block">Valider la commande</a>
                </div>

            </div>
            <!-- End Your Cart Tabs -->

            <!-- Latest Blog Tabs -->
            <div id="latestblog" style="display: none;">

                <div class="latest-blog-featured">
                    <div class="thumb">
                        <img src="images/feat1.jpg" alt="">
                    </div>
                    <span class="meta">05.10.2017 - Natalie Amyllia</span>
                    <h3 class="blog-title"><a href="#">End of year great discount at SELLi</a></h3>
                    <p>Until we open the shop, we always loose and like nothing to win...</p>
                </div>

                <ol class="latest-blog">
                    <li>
                        <span class="meta">05.10.2017 - Natalie Amyllia</span>
                        <h3 class="blog-title"><a href="#">End of year great discount at SELLi</a></h3>
                    </li>
                    <li>
                        <span class="meta">05.10.2017 - Natalie Amyllia</span>
                        <h3 class="blog-title"><a href="#">Happy Discount For All Our Customer</a></h3>
                    </li>
                    <li>
                        <span class="meta">05.10.2017 - Natalie Amyllia</span>
                        <h3 class="blog-title"><a href="#">Buy 1 Get 1 Free for all electronics product</a></h3>
                    </li>
                </ol>
            </div>
            <!-- End Latest Blog Tabs -->

        </div>
        <!-- End Right Sidebar Tabs Content -->

    </div>
    <!-- END RIGHT SIDEBAR -->

    <!-- MAIN PAGE -->
    <div id="page">

        <!-- FIXED Top Navbar -->
        <div class="top-navbar">
            <div class="top-navbar-left">
                <a href="#" id="menu-left" data-activates="slide-out-left">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
            <div class="top-navbar-right">
                <a href="#" class="dropdown-button" data-activates="dropdown1">
                    15  <i class="fa fa-credit-card"></i>
                </a><ul id="dropdown1" class="dropdown-content">
                <li><a href="panel-account.html"><i class="fa fa-server"></i> Panel Account</a></li>
                <li><a href="form-account.html"><i class="fa fa-user"></i> My Profile</a></li>
                <li><a href="order-history.html"><i class="fa fa-history"></i> Order History</a></li>
                <li class="divider"></li>
                <li><a href="tracking-order.html"><i class="fa fa-search"></i> Tracking Order</a></li>
            </ul>
                <a href="#" id="menu-right" data-activates="slide-out-right">
                    <span class="cart-badge">3</span>
                    <i class="fa fa-shopping-basket"></i>
                </a>
            </div>
            <div class="site-title">
                <form class="form-inline m-auto">
                    <input class="form-control" type="text" placeholder="Search" aria-label="Search">
                </form>
            </div>
        </div>
    </div>
    <!-- End FIXED Top Navbar -->

    <div class="row  no-margin">
        <!-- personnage page information -->
        <div class="status-grid">
            <div class="status-grid-head cover" style="background: url('images/status-head-pic.png') no-repeat 0px 0px;">
                <div class="col-sm-12">
                    <div class="col-sm-9">
                        <a class="btn icon-btn btn-muted" href="#">
                            <span class="glyphicon btn-glyphicon  img-circle text-info">
                                <i class="fal fa-jedi"></i></span>
                        </a>
                        <a class="btn icon-btn btn-muted" href="#">
                            <span class="glyphicon btn-glyphicon img-circle text-info">
                                <i class="fa fa-qrcode"></i></span>
                        </a>
                        <div class="row">
                            <div class="col-xs-10">
                            </div>
                            <div class="col-xs-2">
                                <a class="btn icon-btn btn-muted" href="#">
                                    <span class="glyphicon btn-glyphicon  img-circle text-info">
                                        <i class="fa fa-share"></i></span>
                                </a>
                                <a class="btn icon-btn btn-muted" href="#">
                                    <span class="glyphicon btn-glyphicon img-circle text-info">
                                        <i class="fab fa-facebook"></i></span>
                                </a>
                                <a class="btn icon-btn btn-muted" href="#">
                                    <span class="glyphicon btn-glyphicon  img-circle text-info">
                                        <i class="fab fa-instagram"></i></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class=""><span style="font-style:italic;">+ 3 crédit</span></div>
                <div class=""><span style="font-style:italic;">En fesant un selfie</span></div>
                <a class="btn icon-btn btn-muted" href="#">
                                    <span class="glyphicon btn-glyphicon  img-circle text-info">
                                        <i class="far fa-camera-retro"></i></span>
                </a>
            </div>
            <!-- personnage page information -->
            <div class="status-people-pic">
                <img id="imgPerso" class="stat-people" src="images/babar-default.jpg" title="people-name" width="114" height="114">
                <img class="people-avilabel" src="images/avila.png" title="avilabel">
                <h2 id="titrePersonnage">Babar</h2>
                <strong id="nbrAime">2.000</strong>
                <span>  J'aimes
                    <i class="fa fa-thumbs-up" aria-hidden="true"></i>
                </span>
            </div>

            <!-- type product -->
            <!-- dirige dans la bonne section -->
            <div class="status-corrent">
                <ul>
                    <li><a href="#goodDeal" class="appont" >Good deal</a></li>
                    <li><a href="#bestSeller" class="client" >Best seller</a></li>
                    <li><a href="#personnalise" class="report" >Création</a></li>
                    <div class="clear"> </div>
                </ul>
            </div>
            <div class="clear"> </div>
        </div>
    </div>

    <!-- Saviez-vous que ?! -->
    <div class="row no-margin paddingTop10">
        <div class="col-sm-12">
            <div class="col-sm-9">
                <i class="fa fa-question fa-2x"></i> <span><strong>Saviez-vous que ?!</strong></span>
            </div>
            <div >
                <div id="cultureText" class="col-xs-7 col-sm-6">
                    Batman est en réalité ...
                </div>
                <div class="col-xs-5 col-sm-6">
                    <a class="btn icon-btn btn-muted" >
                        <span class="glyphicon btn-glyphicon img-circle text-info"><i class="fas fa-arrow-right"></i></span>
                        avoir plus !!!
                    </a>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Moments quizz !-->
<div class="row no-margin paddingTop5">
    <div class="col-sm-12">
        <div class="col-sm-9">
            <i class="fal fa-gamepad fa-2x"></i> <span><strong>Moments quizz !</strong></span>
            <span style="font-style:italic;">+ 1 crédit</span>
        </div>
        <div>
            <div id="quizzText" class="col-xs-7 col-sm-6 no-margin no-padding">
                Superman est-il plus fort que batman ?
            </div>
            <div class="col-xs-5 col-sm-6 paddingBottom5 text-center no-margin no-padding">
                <div class="col-xs-6 no-margin no-padding">
                    <a class="btn icon-btn btn-muted" style="background-color: #2bbb65;" >
                        <span class="glyphicon btn-glyphicon img-circle text-info"><i class="fas fa-check-circle"></i></span>
                    </a>
                    <a class="btn icon-btn btn-muted" style="background-color: #bb1a08;">
                        <span class="glyphicon btn-glyphicon img-circle text-info"><i class="fas fa-times-circle"></i></span>
                    </a>
                </div>
                <div class="col-xs-6 no-margin no-padding">
                    <span><i class="fas fa-trophy-alt fa-3x"></i></span>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- goodDeal carousel touch -->
<div id="goodDeal" class="status-grid hiddendiv">
    <div class="row">
        <div class="col-sm-12 paddingTop5 text-center">
            <h3 id="#GoodDealSection">Good deal</h3>
        </div>
        <div id="goodDealItems" class="carousel MultiCarousel-inner">
            <!-- use template HTML | JQUERY-->
        </div>
    </div>
</div>
<!-- End carousel touch -->

<!-- bestSeller carousel touch -->
<div id="bestSeller" class="status-grid hiddendiv">
    <div class="row">
        <div class="col-sm-12 paddingTop5 text-center">
            <h3 id="#BestSellerSection">Best seller</h3>
        </div>
        <div id="bestSellerItems" class="carousel MultiCarousel-inner">
            <!-- use template HTML | JQUERY-->
        </div>
    </div>
</div>
<!-- End carousel touch -->

<!-- personnalise carousel touch -->
<div id="personnalise" class="status-grid hiddendiv">
    <div class="row">
        <div class="col-sm-12 paddingTop5 text-center">
            <h3 id="#PersoSection">Personnalisé</h3>
        </div>
        <div id="personnalisableItems" class="carousel MultiCarousel-inner">
            <!-- use template HTML | JQUERY-->
        </div>
    </div>
</div>
<!-- End carousel touch -->

<!-- templateCell generique cellule carousel -->
<div class="carousel-cell templateCell hiddendiv">
    <div class="col-sm-12 text-center">
        <a>
            <img height="150" width="150" class="product-image" src="https://www.usa.canon.com/internet/wcm/connect/us/dba3e27c-5e21-4810-96b6-45e92985dcd5/me200ssh-3q-300x300.png?MOD=AJPERES&amp;CACHEID=ROOTWORKSPACE.Z18_P1KGHJ01L85180AUEPQQJ53034-dba3e27c-5e21-4810-96b6-45e92985dcd5-lgfJMsd&amp;&amp;alt=">
        </a>
        <h4 class="produit_title">Image Title</h4>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <i class="fal fa-star-half-alt"></i>
        <p class="produit_description">Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
        <div class="col-sx-3 pull-left paddingTop5">
            <div class="produit_price"> $999.99</div>
            <!--<span style="text-decoration: line-through; color:red;">$1,399.99</span>-->
        </div>
        <div class="col-sx-9 pull-right paddingTop5">
            <a class="btn icon-btn btn-muted" >
                <span class="glyphicon btn-glyphicon img-circle text-info"><i class="fal fa-cart-plus"></i></span>
                Add To Cart
            </a>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Validation de ta comande</h4>
            </div>
            <div class="modal-body text-center">
                <img src="images/Qrcode_Commande.png" >
                <p><strong>COM 000 000 021</strong></p>
                <p>Viens récupérer ta commande !</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
                <!--<button type="button" class="btn btn-primary">Save changes</button>-->
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- FOOTER -->
<div class="footer">

    <!-- Footer main Section -->
    <div class="footer-main">
        <p>
            <span class="block text-small">Un problème? Contactez nous</span>
            +44 567 89 | contact@fbclol.fr |
        </p>

        <div class="social-footer">
            <a href="#" class="facebook"><i class="fab fa-facebook"></i></a>
            <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" class="instagram"><i class="fab fa-instagram"></i></a>
        </div>
    </div>
    <!-- End Footer main Section -->

    <!-- Copyright Section -->
    <div class="copyright">
        <span class="block">© 2018 musee Inc - Ecommerce Mobile</span>
    </div>
    <!-- End Copyright Section -->
</div>
<!-- End FOOTER -->

<!-- Back to top Link -->
<div id="to-top" class="main-bg" style="bottom: -100px;">
    <i class="fa fa-chevron-up"></i>
</div>

<script type="text/javascript">

    $(document).ready(function() {

        // construction du menu de tout les personnages contenue dans le json
        buildMainMenu();
        // display default  first personnage
        buildPagePersonnage(personnages[0]);

        // 2 bouton pour valider la commande
        $('body').on( "click",'#btnClickCommande', validateCommande );
        $('body').on( "click",'#checkoutCommande', validateCommande );


        // evenement pour le changement du personnage
        $('#main-menu').on( "click",'a[data-personne]', changePagePersonnage );

        // affichange de la modale de la validation de la commande
        function validateCommande() {
            $('.modal').modal('show')
        }

        function changePagePersonnage() {
            event.preventDefault();
            var element = $(this);
            var idPersonne = element.data('personne');
            buildPagePersonnage(personnages[idPersonne-1]);
        }

        function buildMainMenu() {
            _.toArray(_.groupBy(personnages, 'categorie')).forEach(function (Categorie) {
                console.log(Categorie[0].categorie);
                var uniqCat = Categorie[0].categorie;
                $('#categories').append(
                    '<li class="has-sub">' +
                    '   <a data-categorie=' + uniqCat + ' "href="#">' + uniqCat + '<span class="fa fa-angle-right"></span></a>' +
                    '</li>'
                );

                Categorie.forEach(function (personne) {
                    var element = $('#categories').find("a[data-categorie='" + personne.categorie + "']");
                    element.after(
                        '<ul>' +
                        '    <li><a data-personne=' + personne.id + ' "href="#">' + personne.last_name + ' ' + personne.first_name + '</a></li>' +
                        '</ul>'
                    );
                });
            });
        }

        // construit la page du personnage par rapport au personnage donné en paramettre
        function buildPagePersonnage(MonPersonnage) {
            displayPersonnage(MonPersonnage);
            displayDescription(MonPersonnage);
            displayProduct(MonPersonnage)
        }

        // page du personnage (info + description)
        function displayPersonnage(MonPersonnage) {
            if (MonPersonnage.background_image !== undefined) {
                var urlImage = "url(images/"+MonPersonnage.background_image+") no-repeat 0px 0px;";
                $('.status-grid-head').attr('style',  'background:'+urlImage);
            }
            $('#titrePersonnage').text(MonPersonnage.last_name +' '+ MonPersonnage.first_name);
            $("#imgPerso").attr("src","images/"+MonPersonnage.photo_perso);
            $('#nbrAime').text(MonPersonnage.nombre_aime);
        }

        // page du personnage (info + description)
        function displayDescription(MonPersonnage) {
            $('#quizzText').text(MonPersonnage.quizz);
            $('#cultureText').text(MonPersonnage.culture);
        }

        // page du personnage ( produits dérivés du personnage)
        function displayProduct(MonPersonnage) {

            $('#goodDealItems').flickity({
                // options
                cellAlign: 'left',
                contain: true,
                wrapAround: true
            });

            if ($('.carousel-cell').not('.templateCell').length !== 0) {
                $('.carousel-cell').not('.templateCell').remove();
                $('#bestSellerItems').flickity('reloadCells');
                $('#goodDealItems').flickity('reloadCells');
                $('#personnalisableItems').flickity('reloadCells');
            }

            if (MonPersonnage.articles.length !== 0) {
                $('#NoProduct').remove();
                MonPersonnage.articles.forEach(function (article) {
                    var $carousel;
                    switch (article.categorie) {
                        case BEST_SELLER :
                            $carousel = $('#bestSellerItems').flickity();
                            $('#bestSeller').removeClass("hiddendiv");
                            break;
                        case GOOD_DEAL :
                            $carousel = $('#goodDealItems').flickity();
                            $('#goodDeal').removeClass("hiddendiv");
                            break;
                        case PERSONNALISABLE :
                            $carousel = $('#personnalisableItems').flickity();
                            $('#personnalise').removeClass("hiddendiv");
                            break;
                        default :
                            $carousel = $('#goodDealItems').flickity();
                            $('#goodDeal').removeClass("hiddendiv");
                            break;
                    }

                    var $cellElems = $('.carousel-cell.templateCell.hiddendiv').clone();
                    $cellElems.removeClass("hiddendiv");
                    $cellElems.removeClass("templateCell");

                    $cellElems.find('.produit_title').text(article.name);
                    // todo: retour à la ligne
                    $cellElems.find('.produit_description').text(article.description);
                    $cellElems.find('.produit_price').text(article.price);
                    //todo: faire la notation
                    if (undefined !== article.url_photo) {
                        $cellElems.find('.product-image').attr("src", "images/" + article.url_photo);
                    }
                    $carousel.flickity('prepend', $cellElems);
                });
            }  else {

                $('.footer').before('<div id="NoProduct" class="" style="background-color: white"> ' +
                    '<div class="row"> ' +
                    '<div class="col-sm-12 paddingTop5 text-center">' +
                    '<h3>Pas de produit disponible</h3> ' +
                    '</div>');
                // pas de produit associé
                $('#bestSeller').addClass("hiddendiv");
                $('#goodDeal').addClass("hiddendiv");
                $('#personnalise').addClass("hiddendiv");
            }
        }
    });
</script>
<script type="text/javascript" src="template/js/custom.js"></script>
</body>
</html>
